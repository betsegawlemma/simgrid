cmake_minimum_required(VERSION 2.6)

set(prefix "/home/navarrop/Bureau/test_install/")
set(CPACK_SET_DESTDIR on)
set(simgrid_version "3.3.5")

set(CMAKE_PROJECT_NAME "${PROJECT_NAME}")
set(CPACK_PACKAGE_NAME "${PROJECT_NAME}")
set(CPACK_PROJECT_NAME "${PROJECT_NAME}")
set(CPACK_PACKAGE_FILE_NAME "simgrid-${simgrid_version}_rev_${SVN_VERSION}")
set(CPACK_GENERATOR "TBZ2") #;TGZ;TZ;ZIP
	
if(distrib)
	
	set(CMAKE_INSTALL_PREFIX .)

	###copy doc
	install(DIRECTORY "${PROJECT_DIRECTORY}/doc/"
	DESTINATION "doc/"
	)

elseif(distrib)

	set(CMAKE_INSTALL_PREFIX ${prefix})

	###install libs
	install(DIRECTORY "${PROJECT_DIRECTORY}/src/.libs/"
	DESTINATION "lib/"
	)

	###install include
	install(
	DIRECTORY "${PROJECT_DIRECTORY}/include/" 
	DESTINATION "include/" 
	PATTERN ".svn" EXCLUDE 
	PATTERN ".git" EXCLUDE 
	PATTERN "*~" EXCLUDE
	)

	###install doc
	install(
	DIRECTORY "${PROJECT_DIRECTORY}/doc/html/" 
	DESTINATION "doc/simgrid/html" 
	)	

endif(distrib)

include(CPack)
