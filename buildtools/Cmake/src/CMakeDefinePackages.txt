### define source packages

set(EXTRA_DIST 
	${PROJECT_DIRECTORY}/src/portable.h
	${PROJECT_DIRECTORY}/src/xbt/mallocator_private.h
	${PROJECT_DIRECTORY}/src/xbt/dict_private.h
	${PROJECT_DIRECTORY}/src/xbt/heap_private.h
	${PROJECT_DIRECTORY}/src/xbt/fifo_private.h
	${PROJECT_DIRECTORY}/src/xbt/graph_private.h
	${PROJECT_DIRECTORY}/src/xbt/graphxml_parse.c
	${PROJECT_DIRECTORY}/src/xbt/graphxml.l
	${PROJECT_DIRECTORY}/src/xbt/graphxml.c
	${PROJECT_DIRECTORY}/src/xbt/graphxml.dtd
	${PROJECT_DIRECTORY}/src/xbt/log_private.h
	${PROJECT_DIRECTORY}/src/xbt/ex_interface.h
	${PROJECT_DIRECTORY}/src/xbt/backtrace_linux.c
	${PROJECT_DIRECTORY}/src/xbt/backtrace_windows.c
	${PROJECT_DIRECTORY}/src/xbt/backtrace_dummy.c
	${PROJECT_DIRECTORY}/src/xbt/setset_private.h
	${PROJECT_DIRECTORY}/src/xbt/mmalloc/keys.c
	${PROJECT_DIRECTORY}/src/xbt/mmalloc/mmalloc.c
	${PROJECT_DIRECTORY}/src/xbt/mmalloc/mm.c
	${PROJECT_DIRECTORY}/src/xbt/mmalloc/mmprivate.h
	${PROJECT_DIRECTORY}/src/xbt/mmalloc/mrealloc.c
	${PROJECT_DIRECTORY}/src/xbt/mmalloc/attach.c
	${PROJECT_DIRECTORY}/src/xbt/mmalloc/mcalloc.c
	${PROJECT_DIRECTORY}/src/xbt/mmalloc/mmcheck.c
	${PROJECT_DIRECTORY}/src/xbt/mmalloc/mmstats.c
	${PROJECT_DIRECTORY}/src/xbt/mmalloc/mvalloc.c
	${PROJECT_DIRECTORY}/src/xbt/mmalloc/detach.c
	${PROJECT_DIRECTORY}/src/xbt/mmalloc/mfree.c
	${PROJECT_DIRECTORY}/src/xbt/mmalloc/mmap-sup.c
	${PROJECT_DIRECTORY}/src/xbt/mmalloc/mmemalign.c
	${PROJECT_DIRECTORY}/src/xbt/mmalloc/mmtrace.c
	${PROJECT_DIRECTORY}/src/xbt/mmalloc/sbrk-sup.c  
	${PROJECT_DIRECTORY}/src/surf/maxmin_private.h
	${PROJECT_DIRECTORY}/src/surf/trace_mgr_private.h
	${PROJECT_DIRECTORY}/src/surf/surf_private.h
	${PROJECT_DIRECTORY}/src/surf/surfxml_parse.c
	${PROJECT_DIRECTORY}/src/surf/simgrid_dtd.l
	${PROJECT_DIRECTORY}/src/surf/simgrid_dtd.c
	${PROJECT_DIRECTORY}/src/surf/simgrid.dtd
	${PROJECT_DIRECTORY}/src/surf/network_private.h
	${PROJECT_DIRECTORY}/src/surf/network_gtnets_private.h
	${PROJECT_DIRECTORY}/src/surf/gtnets/gtnets_interface.h
	${PROJECT_DIRECTORY}/src/surf/gtnets/gtnets_simulator.h
	${PROJECT_DIRECTORY}/src/surf/gtnets/gtnets_topology.h
	${PROJECT_DIRECTORY}/src/surf/cpu_ti_private.h
	${PROJECT_DIRECTORY}/src/include/surf/surf_resource.h
	${PROJECT_DIRECTORY}/src/include/surf/datatypes.h
	${PROJECT_DIRECTORY}/src/include/surf/maxmin.h
	${PROJECT_DIRECTORY}/src/include/surf/trace_mgr.h
	${PROJECT_DIRECTORY}/src/include/surf/surf.h
	${PROJECT_DIRECTORY}/src/include/surf/surfxml_parse_private.h
	${PROJECT_DIRECTORY}/src/include/surf/random_mgr.h
	${PROJECT_DIRECTORY}/src/include/surf/surf_resource_lmm.h
	${PROJECT_DIRECTORY}/src/include/xbt/wine_dbghelp.h
	${PROJECT_DIRECTORY}/src/include/xbt/xbt_os_time.h
	${PROJECT_DIRECTORY}/src/include/xbt/xbt_os_thread.h
	${PROJECT_DIRECTORY}/src/msg/private.h
	${PROJECT_DIRECTORY}/src/msg/mailbox.h
	${PROJECT_DIRECTORY}/src/simdag/private.h
	${PROJECT_DIRECTORY}/src/simdag/dax.dtd
	${PROJECT_DIRECTORY}/src/simdag/dax_dtd.l
	${PROJECT_DIRECTORY}/src/simdag/dax_dtd.h
	${PROJECT_DIRECTORY}/src/simdag/dax_dtd.c
	${PROJECT_DIRECTORY}/src/gras/DataDesc/ddt_parse.yy.l
	${PROJECT_DIRECTORY}/src/gras/DataDesc/ddt_parse.yy.h
	${PROJECT_DIRECTORY}/src/gras/Virtu/virtu_rl.h
	${PROJECT_DIRECTORY}/src/gras/Virtu/virtu_sg.h
	${PROJECT_DIRECTORY}/src/gras/Virtu/virtu_interface.h
	${PROJECT_DIRECTORY}/src/gras/Virtu/virtu_private.h
	${PROJECT_DIRECTORY}/src/gras/Transport/transport_interface.h
	${PROJECT_DIRECTORY}/src/amok/Bandwidth/bandwidth_private.h
	${PROJECT_DIRECTORY}/src/amok/amok_modinter.h
	${PROJECT_DIRECTORY}/src/include/simix/simix.h
	${PROJECT_DIRECTORY}/src/include/simix/datatypes.h
	${PROJECT_DIRECTORY}/src/include/simix/context.h
	${PROJECT_DIRECTORY}/src/simix/private.h
	${PROJECT_DIRECTORY}/src/simix/smx_context_private.h
	${PROJECT_DIRECTORY}/src/simix/smx_context_java.h
	${PROJECT_DIRECTORY}/src/smpi/private.h
	${PROJECT_DIRECTORY}/src/smpi/smpi_coll_private.h
	${PROJECT_DIRECTORY}/src/smpi/smpi_mpi_dt_private.h
	${PROJECT_DIRECTORY}/src/smpi/README
	${PROJECT_DIRECTORY}/src/mk_supernovae.sh
)

set(XBT_RL_SRC 
	${PROJECT_DIRECTORY}/src/xbt/xbt_rl_synchro.c
	${PROJECT_DIRECTORY}/src/xbt/xbt_rl_time.c
)

set(XBT_SG_SRC 
	${PROJECT_DIRECTORY}/src/xbt/xbt_sg_synchro.c
	${PROJECT_DIRECTORY}/src/xbt/xbt_sg_time.c
)     

set(SMPI_SRC
	${PROJECT_DIRECTORY}/src/smpi/smpi_base.c
	${PROJECT_DIRECTORY}/src/smpi/smpi_bench.c
	${PROJECT_DIRECTORY}/src/smpi/smpi_global.c
	${PROJECT_DIRECTORY}/src/smpi/smpi_mpi.c
	${PROJECT_DIRECTORY}/src/smpi/smpi_comm.c
	${PROJECT_DIRECTORY}/src/smpi/smpi_group.c
	${PROJECT_DIRECTORY}/src/smpi/smpi_util.c
	${PROJECT_DIRECTORY}/src/smpi/smpi_coll.c
	${PROJECT_DIRECTORY}/src/smpi/smpi_mpi_dt.c
)

set(JMSG_C_SRC
	${PROJECT_DIRECTORY}/src/simix/smx_context_java.c
	${PROJECT_DIRECTORY}/src/java/jxbt_utilities.c
	${PROJECT_DIRECTORY}/src/java/jxbt_utilities.h
	${PROJECT_DIRECTORY}/src/java/jmsg.c 
	${PROJECT_DIRECTORY}/src/java/jmsg.h
	${PROJECT_DIRECTORY}/src/java/jmsg_host.c
	${PROJECT_DIRECTORY}/src/java/jmsg_host.h
	${PROJECT_DIRECTORY}/src/java/jmsg_process.c
	${PROJECT_DIRECTORY}/src/java/jmsg_process.h
	${PROJECT_DIRECTORY}/src/java/jmsg_task.c
	${PROJECT_DIRECTORY}/src/java/jmsg_task.h
	${PROJECT_DIRECTORY}/src/java/jmsg_application_handler.c
	${PROJECT_DIRECTORY}/src/java/jmsg_application_handler.h
)

set(JMSG_JAVA_SRC
	${PROJECT_DIRECTORY}/src/java/simgrid/msg/ApplicationHandler.java
	${PROJECT_DIRECTORY}/src/java/simgrid/msg/Host.java
	${PROJECT_DIRECTORY}/src/java/simgrid/msg/HostFailureException.java	
	${PROJECT_DIRECTORY}/src/java/simgrid/msg/HostNotFoundException.java	
	${PROJECT_DIRECTORY}/src/java/simgrid/msg/JniException.java
	${PROJECT_DIRECTORY}/src/java/simgrid/msg/Msg.java
	${PROJECT_DIRECTORY}/src/java/simgrid/msg/MsgException.java
	${PROJECT_DIRECTORY}/src/java/simgrid/msg/MsgNative.java
	${PROJECT_DIRECTORY}/src/java/simgrid/msg/NativeException.java
	${PROJECT_DIRECTORY}/src/java/simgrid/msg/Process.java
	${PROJECT_DIRECTORY}/src/java/simgrid/msg/ProcessNotFoundException.java
	${PROJECT_DIRECTORY}/src/java/simgrid/msg/Sem.java
	${PROJECT_DIRECTORY}/src/java/simgrid/msg/Task.java
	${PROJECT_DIRECTORY}/src/java/simgrid/msg/TaskCancelledException.java
	${PROJECT_DIRECTORY}/src/java/simgrid/msg/TimeoutException.java
	${PROJECT_DIRECTORY}/src/java/simgrid/msg/TransferFailureException.java	
)

set(GRAS_RL_SRC
	${PROJECT_DIRECTORY}/src/gras/rl_stubs.c
	${PROJECT_DIRECTORY}/src/xbt/xbt_os_thread.c
	${PROJECT_DIRECTORY}/src/gras/Transport/rl_transport.c
	${PROJECT_DIRECTORY}/src/gras/Transport/transport_plugin_file.c
	${PROJECT_DIRECTORY}/src/gras/Transport/transport_plugin_tcp.c
	${PROJECT_DIRECTORY}/src/gras/Virtu/rl_emul.c
	${PROJECT_DIRECTORY}/src/gras/Virtu/rl_process.c
	${PROJECT_DIRECTORY}/src/gras/Virtu/rl_dns.c
	${PROJECT_DIRECTORY}/src/gras/Msg/rl_msg.c
	${XBT_RL_SRC}
)

set(XBT_SRC 
	${PROJECT_DIRECTORY}/src/xbt/snprintf.c
	${PROJECT_DIRECTORY}/src/xbt/xbt_str.c
	${PROJECT_DIRECTORY}/src/xbt/xbt_strbuff.c
	${PROJECT_DIRECTORY}/src/xbt/xbt_sha.c
	${PROJECT_DIRECTORY}/src/xbt/ex.c
	${PROJECT_DIRECTORY}/src/xbt_modinter.h
	${PROJECT_DIRECTORY}/src/gras_modinter.h
	${PROJECT_DIRECTORY}/src/xbt/xbt_virtu.c
	${PROJECT_DIRECTORY}/src/xbt/xbt_os_time.c
	${PROJECT_DIRECTORY}/src/xbt/asserts.c
	${PROJECT_DIRECTORY}/src/xbt/log.c
	${PROJECT_DIRECTORY}/src/xbt/xbt_log_appender_file.c
	${PROJECT_DIRECTORY}/src/xbt/xbt_log_layout_simple.c
	${PROJECT_DIRECTORY}/src/xbt/xbt_log_layout_format.c
	${PROJECT_DIRECTORY}/src/xbt/mallocator.c
	${PROJECT_DIRECTORY}/src/xbt/dynar.c
	${PROJECT_DIRECTORY}/src/xbt/dict.c
	${PROJECT_DIRECTORY}/src/xbt/dict_elm.c
	${PROJECT_DIRECTORY}/src/xbt/dict_cursor.c
	${PROJECT_DIRECTORY}/src/xbt/dict_multi.c
	${PROJECT_DIRECTORY}/src/xbt/heap.c
	${PROJECT_DIRECTORY}/src/xbt/fifo.c
	${PROJECT_DIRECTORY}/src/xbt/swag.c
	${PROJECT_DIRECTORY}/src/xbt/graph.c
	${PROJECT_DIRECTORY}/src/xbt/set.c
	${PROJECT_DIRECTORY}/src/xbt/xbt_matrix.c
	${PROJECT_DIRECTORY}/src/xbt/xbt_queue.c
	${PROJECT_DIRECTORY}/src/xbt/xbt_synchro.c
	${PROJECT_DIRECTORY}/src/xbt/xbt_peer.c
	${PROJECT_DIRECTORY}/src/xbt/xbt_main.c
	${PROJECT_DIRECTORY}/src/xbt/config.c
	${PROJECT_DIRECTORY}/src/xbt/cunit.c
	${PROJECT_DIRECTORY}/src/xbt/graphxml_parse.c
	${PROJECT_DIRECTORY}/src/xbt/setset.c
	${PROJECT_DIRECTORY}/src/xbt/mmalloc/mm.c
)

set(GTNETS_SRC 
	${PROJECT_DIRECTORY}/src/surf/gtnets/gtnets_simulator.cc
	${PROJECT_DIRECTORY}/src/surf/gtnets/gtnets_topology.cc
	${PROJECT_DIRECTORY}/src/surf/gtnets/gtnets_interface.cc
	${PROJECT_DIRECTORY}/src/surf/network_gtnets.c
)

set(SURF_SRC 
	${PROJECT_DIRECTORY}/src/surf/surf_model.c
	${PROJECT_DIRECTORY}/src/surf/surf_action.c
	${PROJECT_DIRECTORY}/src/surf/surf_routing.c
	${PROJECT_DIRECTORY}/src/surf/surf_config.c
	${PROJECT_DIRECTORY}/src/surf/maxmin.c
	${PROJECT_DIRECTORY}/src/surf/fair_bottleneck.c
	${PROJECT_DIRECTORY}/src/surf/lagrange.c
	${PROJECT_DIRECTORY}/src/surf/trace_mgr.c
	${PROJECT_DIRECTORY}/src/surf/random_mgr.c
	${PROJECT_DIRECTORY}/src/surf/surf.c
	${PROJECT_DIRECTORY}/src/surf/surfxml_parse.c
	${PROJECT_DIRECTORY}/src/surf/cpu.c
	${PROJECT_DIRECTORY}/src/surf/network.c
	${PROJECT_DIRECTORY}/src/surf/network_vivaldi.c
	${PROJECT_DIRECTORY}/src/surf/network_constant.c
	${PROJECT_DIRECTORY}/src/surf/workstation.c
	${PROJECT_DIRECTORY}/src/surf/surf_model_timer.c
	${PROJECT_DIRECTORY}/src/surf/workstation_ptask_L07.c
	${PROJECT_DIRECTORY}/src/surf/cpu_ti.c
	${PROJECT_DIRECTORY}/src/surf/cpu_im.c
	${PROJECT_DIRECTORY}/src/xbt/xbt_sg_stubs.c
)

set(SIMIX_SRC 
	${PROJECT_DIRECTORY}/src/simix/smx_global.c
	${PROJECT_DIRECTORY}/src/simix/smx_deployment.c
	${PROJECT_DIRECTORY}/src/simix/smx_environment.c
	${PROJECT_DIRECTORY}/src/simix/smx_host.c
	${PROJECT_DIRECTORY}/src/simix/smx_process.c
	${PROJECT_DIRECTORY}/src/simix/smx_context.c
	${PROJECT_DIRECTORY}/src/simix/smx_action.c
	${PROJECT_DIRECTORY}/src/simix/smx_synchro.c
	${PROJECT_DIRECTORY}/src/simix/smx_network.c
	${PROJECT_DIRECTORY}/src/simix/smx_context_base.c
)

set(MSG_SRC
	${PROJECT_DIRECTORY}/src/msg/msg_config.c
	${PROJECT_DIRECTORY}/src/msg/task.c
	${PROJECT_DIRECTORY}/src/msg/host.c
	${PROJECT_DIRECTORY}/src/msg/m_process.c
	${PROJECT_DIRECTORY}/src/msg/gos.c
	${PROJECT_DIRECTORY}/src/msg/global.c
	${PROJECT_DIRECTORY}/src/msg/environment.c
	${PROJECT_DIRECTORY}/src/msg/deployment.c
	${PROJECT_DIRECTORY}/src/msg/msg_mailbox.c
	${PROJECT_DIRECTORY}/src/msg/msg_actions.c
)

set(SIMDAG_SRC
	${PROJECT_DIRECTORY}/src/simdag/sd_global.c
	${PROJECT_DIRECTORY}/src/simdag/sd_link.c
	${PROJECT_DIRECTORY}/src/simdag/sd_task.c
	${PROJECT_DIRECTORY}/src/simdag/sd_workstation.c
	${PROJECT_DIRECTORY}/src/simdag/sd_daxloader.c
)

set(GRAS_COMMON_SRC
	${PROJECT_DIRECTORY}/src/gras/gras.c
	${PROJECT_DIRECTORY}/src/gras/Transport/transport.c
	${PROJECT_DIRECTORY}/src/gras/Transport/transport_private.h
	${PROJECT_DIRECTORY}/src/gras/Msg/gras_msg_mod.c
	${PROJECT_DIRECTORY}/src/gras/Msg/gras_msg_types.c
	${PROJECT_DIRECTORY}/src/gras/Msg/gras_msg_exchange.c
	${PROJECT_DIRECTORY}/src/gras/Msg/gras_msg_listener.c
	${PROJECT_DIRECTORY}/src/gras/Msg/rpc.c 
	${PROJECT_DIRECTORY}/src/gras/Msg/timer.c
	${PROJECT_DIRECTORY}/src/gras/Msg/msg_interface.h
	${PROJECT_DIRECTORY}/src/gras/Msg/msg_private.h
	${PROJECT_DIRECTORY}/src/gras/Virtu/process.c
	${PROJECT_DIRECTORY}/src/gras/Virtu/gras_module.c
	${PROJECT_DIRECTORY}/src/gras/DataDesc/ddt_create.c
	${PROJECT_DIRECTORY}/src/gras/DataDesc/ddt_convert.c
	${PROJECT_DIRECTORY}/src/gras/DataDesc/ddt_exchange.c
	${PROJECT_DIRECTORY}/src/gras/DataDesc/cbps.c
	${PROJECT_DIRECTORY}/src/gras/DataDesc/datadesc.c
	${PROJECT_DIRECTORY}/src/gras/DataDesc/datadesc_interface.h
	${PROJECT_DIRECTORY}/src/gras/DataDesc/datadesc_private.h
	${PROJECT_DIRECTORY}/src/gras/DataDesc/ddt_parse.c
	${PROJECT_DIRECTORY}/src/gras/DataDesc/ddt_parse.yy.c
)

set(GRAS_SG_SRC
	${PROJECT_DIRECTORY}/src/gras/Transport/sg_transport.c
	${PROJECT_DIRECTORY}/src/gras/Transport/transport_plugin_sg.c
	${PROJECT_DIRECTORY}/src/gras/Virtu/sg_emul.c
	${PROJECT_DIRECTORY}/src/gras/Virtu/sg_process.c
	${PROJECT_DIRECTORY}/src/gras/Virtu/sg_dns.c
	${PROJECT_DIRECTORY}/src/gras/Msg/sg_msg.c
	${XBT_SG_SRC}
)

set(AMOK_SRC
	${PROJECT_DIRECTORY}/src/amok/amok_base.c
	${PROJECT_DIRECTORY}/src/amok/Bandwidth/bandwidth.c
	${PROJECT_DIRECTORY}/src/amok/Bandwidth/saturate.c
	${PROJECT_DIRECTORY}/src/amok/PeerManagement/peermanagement.c
)

set(LUA_SRC
	${PROJECT_DIRECTORY}/src/simix/smx_context_lua.c
	${PROJECT_DIRECTORY}/src/bindings/lua/simgrid_lua.c
)

set(TRACING_SRC
	${PROJECT_DIRECTORY}/src/instr/interface.c
	${PROJECT_DIRECTORY}/src/instr/general.c
	${PROJECT_DIRECTORY}/src/instr/paje.c
	${PROJECT_DIRECTORY}/src/instr/msg_task_instr.c
	${PROJECT_DIRECTORY}/src/instr/msg_process_instr.c
	${PROJECT_DIRECTORY}/src/instr/msg_volume.c
	${PROJECT_DIRECTORY}/src/instr/smx_instr.c
	${PROJECT_DIRECTORY}/src/instr/surf_instr.c
	${PROJECT_DIRECTORY}/src/instr/variables_instr.c
	${PROJECT_DIRECTORY}/src/instr/private.h
)

set(RUBY_SRC
${PROJECT_DIRECTORY}/src/simix/smx_context_ruby.c
${PROJECT_DIRECTORY}/src/bindings/ruby/rb_msg_process.c
${PROJECT_DIRECTORY}/src/bindings/ruby/rb_msg_host.c
${PROJECT_DIRECTORY}/src/bindings/ruby/rb_msg_task.c
${PROJECT_DIRECTORY}/src/bindings/ruby/rb_application_handler.c
)

set(install_bins
${PROJECT_DIRECTORY}/src/smpi/smpicc
${PROJECT_DIRECTORY}/src/smpi/smpirun
${PROJECT_DIRECTORY}/tools/gras/gras_stub_generator
${PROJECT_DIRECTORY}/tools/tesh/tesh
)

set(install_libs
${PROJECT_DIRECTORY}/src/.libs/libsimgrid.*
${PROJECT_DIRECTORY}/src/.libs/libsimgrid_static.*
${PROJECT_DIRECTORY}/src/.libs/libgras.*
)

if(enable_smpi)
	set(install_libs
	${install_libs}
	${PROJECT_DIRECTORY}/src/.libs/libsmpi.*
	)
endif(enable_smpi)

set(install_HEADERS
./include/gras.h 
./include/xbt.h
./include/simgrid_config.h
./include/xbt/misc.h
./include/xbt/sysdep.h
./include/xbt/virtu.h
./include/xbt/str.h
./include/xbt/strbuff.h
./include/xbt/hash.h
./include/xbt/function_types.h
./include/xbt/asserts.h 
./include/xbt/ex.h
./include/xbt/log.h
./include/xbt/module.h
./include/xbt/mallocator.h
./include/xbt/dynar.h
./include/xbt/dict.h
./include/xbt/set.h
./include/xbt/heap.h
./include/xbt/graph.h
./include/xbt/fifo.h
./include/xbt/swag.h
./include/xbt/matrix.h
./include/xbt/peer.h
./include/xbt/config.h
./include/xbt/cunit.h
./include/xbt/graphxml_parse.h
./include/xbt/graphxml.h
./include/xbt/time.h
./include/xbt/synchro.h
./include/xbt/synchro_core.h
./include/xbt/queue.h
./include/xbt/setset.h
./include/mmalloc.h
./include/msg/msg.h
./include/msg/datatypes.h
./include/simdag/simdag.h
./include/simdag/datatypes.h
./include/smpi/smpi.h
./include/smpi/mpi.h
./include/surf/surfxml_parse.h
./include/surf/simgrid_dtd.h
./include/gras/datadesc.h
./include/gras/transport.h
./include/gras/virtu.h
./include/gras/emul.h
./include/gras/process.h
./include/gras/module.h
./include/gras/messages.h
./include/gras/timer.h
./include/amok/peermanagement.h
./include/amok/bandwidth.h
./include/instr/instr.h
./include/instr/tracing_config.h
)

set(TEST_UNITS
cunit_unit.c
ex_unit.c
dynar_unit.c
dict_unit.c
set_unit.c
swag_unit.c
xbt_str_unit.c
xbt_strbuff_unit.c
xbt_sha_unit.c
config_unit.c
xbt_synchro_unit.c
)

set(TEST_CFILES
${PROJECT_DIRECTORY}/src/xbt/cunit.c
${PROJECT_DIRECTORY}/src/xbt/ex.c
${PROJECT_DIRECTORY}/src/xbt/dynar.c
${PROJECT_DIRECTORY}/src/xbt/dict.c
${PROJECT_DIRECTORY}/src/xbt/set.c
${PROJECT_DIRECTORY}/src/xbt/swag.c
${PROJECT_DIRECTORY}/src/xbt/xbt_str.c
${PROJECT_DIRECTORY}/src/xbt/xbt_strbuff.c
${PROJECT_DIRECTORY}/src/xbt/xbt_sha.c
${PROJECT_DIRECTORY}/src/xbt/config.c
${PROJECT_DIRECTORY}/src/xbt/xbt_synchro.c
)

#Here must have all files which permit to generate source files
set(SRC_TO_LOOK
${PROJECT_DIRECTORY}/src/surf/simgrid.dtd
${PROJECT_DIRECTORY}/src/xbt/graphxml.dtd
${PROJECT_DIRECTORY}/src/simdag/dax.dtd
${PROJECT_DIRECTORY}/examples/gras/ping/ping.xml
${PROJECT_DIRECTORY}/examples/gras/rpc/rpc.xml
${PROJECT_DIRECTORY}/examples/gras/spawn/spawn.xml
${PROJECT_DIRECTORY}/examples/gras/timer/timer.xml
${PROJECT_DIRECTORY}/examples/gras/chrono/chrono.xml
${PROJECT_DIRECTORY}/examples/gras/mutual_exclusion/simple_token/simple_token.xml
${PROJECT_DIRECTORY}/examples/gras/mmrpc/mmrpc.xml
${PROJECT_DIRECTORY}/examples/gras/all2all/all2all.xml
${PROJECT_DIRECTORY}/examples/gras/pmm/pmm.xml
${PROJECT_DIRECTORY}/examples/gras/synchro/synchro.xml
${PROJECT_DIRECTORY}/examples/gras/properties/properties.xml
${PROJECT_DIRECTORY}/teshsuite/gras/msg_handle/msg_handle.xml
${PROJECT_DIRECTORY}/teshsuite/gras/empty_main/empty_main.xml
${PROJECT_DIRECTORY}/teshsuite/gras/small_sleep/small_sleep.xml
${PROJECT_DIRECTORY}/examples/amok/bandwidth/bandwidth.xml
${PROJECT_DIRECTORY}/examples/amok/saturate/saturate.xml
${TEST_CFILES}
)

### depend of some variables setted upper
# -->CONTEXT_THREADS
if(${CONTEXT_THREADS})
	set(SURF_SRC
		${SURF_SRC}
		${PROJECT_DIRECTORY}/src/xbt/xbt_os_thread.c
		${PROJECT_DIRECTORY}/src/simix/smx_context_thread.c
	)
	set(EXTRA_DIST
		${EXTRA_DIST}
		${PROJECT_DIRECTORY}/src/simix/smx_context_sysv.c
	)
else(${CONTEXT_THREADS})
	set(SURF_SRC
		${SURF_SRC}
		${PROJECT_DIRECTORY}/src/simix/smx_context_sysv.c
	)
	set(EXTRA_DIST
		${EXTRA_DIST}
		${PROJECT_DIRECTORY}/src/xbt/xbt_os_thread.c
		${PROJECT_DIRECTORY}/src/simix/smx_context_thread.c
	)
endif(${CONTEXT_THREADS})

# -->HAVE_GTNETS
if(HAVE_GTNETS)
  	set(GTNETS_USED 
		${GTNETS_SRC}
	)
else(HAVE_GTNETS)
  	set(GTNETS_USED "")
	set(EXTRA_DIST
		${EXTRA_DIST}
		${GTNETS_SRC}
	)
endif(HAVE_GTNETS)

set(EXTRA_DIST
	${EXTRA_DIST}
	${JMSG_JAVA_SRC}
)

### Simgrid Lib sources
set(simgrid_sources
	${XBT_SRC}
	${SURF_SRC}
	${GTNETS_USED}
	${SIMIX_SRC}
	${MSG_SRC}
	${TRACING_SRC}
	${SIMDAG_SRC}
	${GRAS_COMMON_SRC}
	${GRAS_SG_SRC}
	${AMOK_SRC}
)

### Gras Lib sources
set(gras_sources
	${XBT_SRC}
	${GRAS_COMMON_SRC}
	${GRAS_RL_SRC}
	${AMOK_SRC}
)

if(${HAVE_LUA})
  	set(simgrid_sources
		${simgrid_sources}
		${LUA_SRC}
	)
elseif(${HAVE_LUA})
  	set(EXTRA_DIST
		${EXTRA_DIST}
		${LUA_SRC}
	)
endif(${HAVE_LUA})

if(${HAVE_JAVA})
	set(simgrid_sources
		${simgrid_sources}
		${JMSG_C_SRC} # add the binding support to the library
	)
else(${HAVE_JAVA})
	set(EXTRA_DIST
		${EXTRA_DIST}
		${JMSG_C_SRC}
		${MSG_SRC}
	)
endif(${HAVE_JAVA})

if(${HAVE_RUBY})
	set(simgrid_sources
		${simgrid_sources}
		${RUBY_SRC}
		${PROJECT_DIRECTORY}/src/bindings/ruby/simgrid_ruby.c
	)
else(${HAVE_RUBY})
	set(EXTRA_DIST
		${EXTRA_DIST}
		${RUBY_SRC}
		${PROJECT_DIRECTORY}/src/bindings/ruby/simgrid_ruby.c
	)
endif(${HAVE_RUBY})

file(GLOB_RECURSE add_src_files
"${PROJECT_DIRECTORY}/examples/*.c"
"${PROJECT_DIRECTORY}/teshsuite/*.c"
"${PROJECT_DIRECTORY}/testsuite/*.c"
"${PROJECT_DIRECTORY}/tools/*.c"
"${PROJECT_DIRECTORY}/examples/*.cxx"
"${PROJECT_DIRECTORY}/teshsuite/*.cxx"
"${PROJECT_DIRECTORY}/testsuite/*.cxx"
"${PROJECT_DIRECTORY}/tools/*.cxx"
"${PROJECT_DIRECTORY}/examples/*CMakeLists.txt"
"${PROJECT_DIRECTORY}/teshsuite/*CMakeLists.txt"
"${PROJECT_DIRECTORY}/testsuite/*CMakeLists.txt"
"${PROJECT_DIRECTORY}/tools/*CMakeLists.txt"
"${PROJECT_DIRECTORY}/src/*CMakeLists.txt"
"${PROJECT_DIRECTORY}/examples/*.java"
)

file(GLOB_RECURSE ex_to_svg
"${PROJECT_DIRECTORY}/examples/*.c"
"${PROJECT_DIRECTORY}/examples/*.h"
"${PROJECT_DIRECTORY}/examples/*.cxx"
"${PROJECT_DIRECTORY}/examples/*.hpp"
"${PROJECT_DIRECTORY}/examples/*.c"
"${PROJECT_DIRECTORY}/examples/*.rb"
"${PROJECT_DIRECTORY}/examples/*.lua"
"${PROJECT_DIRECTORY}/examples/*.java"
"${PROJECT_DIRECTORY}/examples/*.xml"
)
string(REPLACE "${PROJECT_DIRECTORY}/" "" ex_to_svg "${ex_to_svg}")
foreach(file ${ex_to_svg})
	string(REGEX REPLACE "/[^/]*$" "" file "${file}")
	set(new_ex_to_svg "${new_ex_to_svg}${file};")
endforeach(file ${ex_to_svg})

set(directory_to_create "")

foreach(file ${new_ex_to_svg})
	string(REGEX MATCH "${file};" OPERATION "${directory_to_create}")
	if(NOT OPERATION)
		set(directory_to_create "${directory_to_create}${file};")
	endif(NOT OPERATION)
endforeach(file ${new_ex_to_svg})


file(GLOB_RECURSE include_files
"${PROJECT_DIRECTORY}/include/*.h"
"${PROJECT_DIRECTORY}/teshsuite/*.h"
"${PROJECT_DIRECTORY}/testsuite/*.h"
"${PROJECT_DIRECTORY}/tools/*.h"
"${PROJECT_DIRECTORY}/examples/*.h"
"${PROJECT_DIRECTORY}/examples/*.hpp"
"${PROJECT_DIRECTORY}/src/*.h.in"
"${PROJECT_DIRECTORY}/include/*.h.in"
)
#message("\n\ninclude:\n${include_files}")

file(GLOB_RECURSE xml_files
"${PROJECT_DIRECTORY}/examples/*.xml"
"${PROJECT_DIRECTORY}/include/*.xml"
"${PROJECT_DIRECTORY}/src/*.xml"
"${PROJECT_DIRECTORY}/teshsuite/*.xml"
"${PROJECT_DIRECTORY}/testsuite/*.xml"
"${PROJECT_DIRECTORY}/tools/*.xml"
)
#message("\n\nxml:\n${xml_files}")

file(GLOB_RECURSE tesh_files
"${PROJECT_DIRECTORY}/examples/*.tesh"
"${PROJECT_DIRECTORY}/include/*.tesh"
"${PROJECT_DIRECTORY}/src/*.tesh"
"${PROJECT_DIRECTORY}/teshsuite/*.tesh"
"${PROJECT_DIRECTORY}/testsuite/*.tesh"
"${PROJECT_DIRECTORY}/tools/*.tesh"
)
#message("\n\ntesh:\n${tesh_files}")

file(GLOB_RECURSE txt_files
"${PROJECT_DIRECTORY}/testsuite/surf/trace*.txt"
"${PROJECT_DIRECTORY}/testsuite/simdag/availability_tremblay.txt"
"${PROJECT_DIRECTORY}/examples/smpi/hostfile"
"${PROJECT_DIRECTORY}/examples/msg/*.trace"
"${PROJECT_DIRECTORY}/examples/msg/migration/migration.deploy"
"${PROJECT_DIRECTORY}/examples/java/runtest"
"${PROJECT_DIRECTORY}/teshsuite/gras/datadesc/datadesc.little32_4"
"${PROJECT_DIRECTORY}/teshsuite/gras/datadesc/datadesc.little64"
"${PROJECT_DIRECTORY}/teshsuite/gras/datadesc/datadesc.big32_8"
"${PROJECT_DIRECTORY}/teshsuite/gras/datadesc/datadesc.big32_8_4"
"${PROJECT_DIRECTORY}/teshsuite/gras/datadesc/datadesc.big32_2"
"${PROJECT_DIRECTORY}/teshsuite/gras/datadesc/mk_datadesc_structs.pl"
"${PROJECT_DIRECTORY}/teshsuite/gras/msg_handle/test_rl"
"${PROJECT_DIRECTORY}/teshsuite/gras/msg_handle/test_sg_32"
"${PROJECT_DIRECTORY}/teshsuite/gras/msg_handle/test_sg_64"
"${PROJECT_DIRECTORY}/teshsuite/gras/empty_main/test_rl"
"${PROJECT_DIRECTORY}/teshsuite/gras/empty_main/test_sg"
"${PROJECT_DIRECTORY}/teshsuite/gras/small_sleep/test_sg_32"
"${PROJECT_DIRECTORY}/teshsuite/gras/small_sleep/test_sg_64"
"${PROJECT_DIRECTORY}/teshsuite/simdag/platforms/bob.fail"
"${PROJECT_DIRECTORY}/teshsuite/simdag/platforms/bob.trace"
"${PROJECT_DIRECTORY}/teshsuite/simdag/platforms/link1.bw"
"${PROJECT_DIRECTORY}/teshsuite/simdag/platforms/link1.fail"
"${PROJECT_DIRECTORY}/teshsuite/simdag/platforms/link1.lat"
"${PROJECT_DIRECTORY}/examples/gras/ping/test_rl"
"${PROJECT_DIRECTORY}/examples/gras/rpc/test_rl"
"${PROJECT_DIRECTORY}/examples/gras/spawn/test_rl"
"${PROJECT_DIRECTORY}/examples/gras/timer/test_rl"
"${PROJECT_DIRECTORY}/examples/gras/chrono/test_rl"
"${PROJECT_DIRECTORY}/examples/gras/mutual_exclusion/simple_token/test_rl"
"${PROJECT_DIRECTORY}/examples/gras/mmrpc/test_rl"
"${PROJECT_DIRECTORY}/examples/gras/all2all/test_rl"
"${PROJECT_DIRECTORY}/examples/gras/pmm/test_rl"
"${PROJECT_DIRECTORY}/examples/gras/synchro/test_rl"
"${PROJECT_DIRECTORY}/examples/gras/properties/test_rl"
"${PROJECT_DIRECTORY}/examples/gras/ping/test_sg_32"
"${PROJECT_DIRECTORY}/examples/gras/rpc/test_sg_32"
"${PROJECT_DIRECTORY}/examples/gras/spawn/test_sg_32"
"${PROJECT_DIRECTORY}/examples/gras/timer/test_sg_32"
"${PROJECT_DIRECTORY}/examples/gras/chrono/test_sg_32"
"${PROJECT_DIRECTORY}/examples/gras/mutual_exclusion/simple_token/test_sg_32"
"${PROJECT_DIRECTORY}/examples/gras/mmrpc/test_sg_32"
"${PROJECT_DIRECTORY}/examples/gras/all2all/test_sg_32"
"${PROJECT_DIRECTORY}/examples/gras/pmm/test_sg_32"
"${PROJECT_DIRECTORY}/examples/gras/synchro/test_sg_32"
"${PROJECT_DIRECTORY}/examples/gras/ping/test_sg_64"
"${PROJECT_DIRECTORY}/examples/gras/rpc/test_sg_64"
"${PROJECT_DIRECTORY}/examples/gras/spawn/test_sg_64"
"${PROJECT_DIRECTORY}/examples/gras/timer/test_sg_64"
"${PROJECT_DIRECTORY}/examples/gras/chrono/test_sg_64"
"${PROJECT_DIRECTORY}/examples/gras/mutual_exclusion/simple_token/test_sg_64"
"${PROJECT_DIRECTORY}/examples/gras/mmrpc/test_sg_64"
"${PROJECT_DIRECTORY}/examples/gras/all2all/test_sg_64"
"${PROJECT_DIRECTORY}/examples/gras/pmm/test_sg_64"
"${PROJECT_DIRECTORY}/examples/gras/synchro/test_sg_64"
"${PROJECT_DIRECTORY}/examples/gras/properties/test_sg"
"${PROJECT_DIRECTORY}/examples/java/basic/BasicTest"
"${PROJECT_DIRECTORY}/examples/java/ping_pong/PingPongTest"
"${PROJECT_DIRECTORY}/examples/java/comm_time/CommTimeTest"
"${PROJECT_DIRECTORY}/examples/java/suspend/SuspendTest"
)

set(to_svg	
	${XBT_RL_SRC}
	${EXTRA_DIST}
	${SMPI_SRC}
	${JMSG_C_SRC}
	${JMSG_JAVA_SRC}
	${GRAS_RL_SRC}
	${XBT_SRC}
	${GTNETS_SRC}
	${SURF_SRC}
	${SIMIX_SRC}
	${TRACING_SRC}
	${MSG_SRC}
	${SIMDAG_SRC}
	${GRAS_COMMON_SRC}
	${GRAS_SG_SRC}
	${AMOK_SRC}
	${LUA_SRC}
	${RUBY_SRC}
	${add_src_files}
	${include_files}
	${xml_files}
	${tesh_files}
	${txt_files}
	${TEST_CFILES}
	${PROJECT_DIRECTORY}/./CMakeLists.txt
	${PROJECT_DIRECTORY}/./AUTHORS
	${PROJECT_DIRECTORY}/./ChangeLog
	${PROJECT_DIRECTORY}/./COPYING
	${PROJECT_DIRECTORY}/./missing
	${PROJECT_DIRECTORY}/./NEWS
	${PROJECT_DIRECTORY}/./README
	${PROJECT_DIRECTORY}/./README.IEEE
	${PROJECT_DIRECTORY}/./TODO
	${PROJECT_DIRECTORY}/./src/smpi/smpicc.in
	${PROJECT_DIRECTORY}/./src/smpi/smpirun.in
	${PROJECT_DIRECTORY}/./src/bindings/ruby/simgrid_ruby.c
	${PROJECT_DIRECTORY}/./src/bindings/ruby_bindings.h
	${PROJECT_DIRECTORY}/./src/simix/smx_context_sysv_private.h
	${PROJECT_DIRECTORY}/./src/simgrid_units_main.c
	${PROJECT_DIRECTORY}/./src/cunit_unit.c
	${PROJECT_DIRECTORY}/./src/ex_unit.c
	${PROJECT_DIRECTORY}/./src/dynar_unit.c
	${PROJECT_DIRECTORY}/./src/dict_unit.c
	${PROJECT_DIRECTORY}/./src/set_unit.c
	${PROJECT_DIRECTORY}/./src/swag_unit.c
	${PROJECT_DIRECTORY}/./src/xbt_str_unit.c
	${PROJECT_DIRECTORY}/./src/xbt_strbuff_unit.c
	${PROJECT_DIRECTORY}/./src/xbt_sha_unit.c
	${PROJECT_DIRECTORY}/./src/config_unit.c
	${PROJECT_DIRECTORY}/./src/xbt_synchro_unit.c
	${PROJECT_DIRECTORY}/./src/bindings/lua/master_slave.lua
	${PROJECT_DIRECTORY}/./src/bindings/lua/mult_matrix.lua
	${PROJECT_DIRECTORY}/./examples/lua/master_slave.lua
	${PROJECT_DIRECTORY}/./examples/lua/mult_matrix.lua
	${PROJECT_DIRECTORY}/./examples/lua/README
	${PROJECT_DIRECTORY}/./src/bindings/ruby/MasterSlave.rb
	${PROJECT_DIRECTORY}/./src/bindings/ruby/MasterSlaveData.rb
	${PROJECT_DIRECTORY}/./src/bindings/ruby/PingPong.rb
	${PROJECT_DIRECTORY}/./src/bindings/ruby/Quicksort.rb
	${PROJECT_DIRECTORY}/./src/bindings/ruby/simgrid.rb
	${PROJECT_DIRECTORY}/./examples/ruby/README
	${PROJECT_DIRECTORY}/./examples/ruby/MasterSlave.rb
	${PROJECT_DIRECTORY}/./examples/ruby/PingPong.rb
	${PROJECT_DIRECTORY}/./examples/ruby/Quicksort.rb
	${PROJECT_DIRECTORY}/./src/bindings/rubyDag/example.rb
	${PROJECT_DIRECTORY}/./src/bindings/rubyDag/extconfig.rb
	${PROJECT_DIRECTORY}/./src/bindings/rubyDag/rb_SD_task.c
	${PROJECT_DIRECTORY}/./src/bindings/rubyDag/rb_SD_task.h
	${PROJECT_DIRECTORY}/./src/bindings/rubyDag/rb_SD_workstation.c
	${PROJECT_DIRECTORY}/./src/bindings/rubyDag/rb_SD_workstation.h
	${PROJECT_DIRECTORY}/./src/bindings/rubyDag/rb_simdag.c
	${PROJECT_DIRECTORY}/./src/bindings/rubyDag/simdag.rb
)
set(script_to_install
	${PROJECT_DIRECTORY}/./src/smpi/smpicc
	${PROJECT_DIRECTORY}/./src/smpi/smpirun
	${PROJECT_DIRECTORY}/./tools/sg_unit_extractor.pl
	${PROJECT_DIRECTORY}/./tools/doxygen/index_create.pl
	${PROJECT_DIRECTORY}/./tools/doxygen/toc_create.pl
	${PROJECT_DIRECTORY}/./tools/doxygen/index_php.pl
	${PROJECT_DIRECTORY}/./tools/doxygen/doxygen_postprocesser.pl
	${PROJECT_DIRECTORY}/./tools/doxygen/bibtex2html_table_count.pl
	${PROJECT_DIRECTORY}/./tools/doxygen/bibtex2html_postprocessor.pl
	${PROJECT_DIRECTORY}/./tools/doxygen/xbt_log_extract_hierarchy.pl
	${PROJECT_DIRECTORY}/./tools/MSG_visualization/colorize.pl
	${PROJECT_DIRECTORY}/./tools/MSG_visualization/trace2fig.pl
)

#message("\n\ntesh:\n${txt_files}")
